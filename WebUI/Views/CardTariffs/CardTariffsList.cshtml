@model List<CardTariffsDto>

<div class="main-content-block">

	<h4 class="empty-list " id="empty-list-title">
		Card list is empty, you can create card by button bellow
	</h4>

	<span class="elements-count" data-elements-list-count="@ViewBag.Count" style="display: none"></span>

	<div id="elements-block" class="card-element-block">
		@foreach (CardTariffsDto card in Model)
		{
			<div class="element-block border-none" style="@($"background-color:{card.CardColor}; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);")">
				<a class="text-reset text-decoration-none info-card">

					<div class="element-table" id="card-tariffs-element">
						<div id="card-and-bank-names">
							<h2>@card.BankName</h2>
							<h4>@card.CardName</h4>
						</div>
						<div class="right-card-side">
							<div id="payment-systems">
								@if (card.EnabledPaymentSystems.Contains(PaymentSystem.Visa))
								{
									<div class="payment-system-block">
										<img src="~/images/cards/visa.svg" alt="Visa" class="payment-system-image" />
									</div>
								}
								@if (card.EnabledPaymentSystems.Contains(PaymentSystem.Mastercard))
								{
									<div class="payment-system-block">
										<img src="~/images/cards/mastercard.svg" alt="Mastercard" class="payment-system-image" />
									</div>
								}
							</div>
							<div class="card-details">
								<h4>@card.Type</h4>
								@if (card.Level == CardLevel.Normal)
								{
									<h5>Classic</h5>
								}
								@if (card.Level == CardLevel.Premium)
								{
									<h5>@card.Level</h5>
								}

							</div>
						</div>
					</div>
				</a>

				<div class="action-buttons" id="card-action-buttons">
					<form asp-controller="CardTariffs" asp-action="UpdateCard" asp-route-cardId="@card.Id" id="add-form" method="get">
						<button class="update-element" type="submit">Update Card</button>
					</form>
					<button class="delete-element">Delete Card</button>
				</div>
			</div>
		}
	</div>

	<div class="d-flex flex-row align-items-center action-panel gap-4">
		<button class="load-more">Load More</button>
		<form asp-controller="Bank" asp-action="GetBanksForChose" asp-route-entity="card-tariffs" id="add-form" method="get">
			<button class="add-element" type="submit">Add Card</button>
		</form>
	</div>
</div>

@section backButton {
	<a asp-controller="Home" asp-action="Index" class="text-reset text-decoration-none back-link d-flex align-items-center">
		<img src="~/images/main-page/arrow-to-left-icon.svg" alt="Back" />
	</a>
}
@section ColumsHandler {
	<div id="colums" class="d-flex flex-row gap-1">
		<img src="~/images/main-page/one-column.svg" class="chosen" id="one-column" alt="One column" />
		<img src="~/images/main-page/two-columns.svg" id="two-columns" alt="Two columns" />
	</div>
}
@section Search {
	<form asp-controller="CardTariffs" asp-action="LoadCardTariffs" id="search" class="d-flex flex-row align-items-center" method="post">
		<div id="find-element" class="d-flex flex-row align-items-center">
			<input type="text" name="SearchValue" id="search-input" placeholder="Enter the card name" />
			<button type="button" class="filter-submit-button" id="search-button">Search</button>
		</div>
		<input type="hidden" name="FirstElement" />
		<input type="hidden" name="ElementsToLoad" />
		<!--Sorting-->
		<div id="filters" class="d-flex flex-row align-items-center">
			<img src="~/images/main-page/sort-icon.svg" alt="Sort" id="sort-icon" />
			<div id="sort-list" class="card-tarrifs-sort-list">
				<label>
					<input type="radio" name="SortValue" value="name-ascending" checked>
					Name Ascending
				</label>

				<label class="mt-1">
					<input type="radio" name="SortValue" value="name-descending">
					Name Descending
				</label>

				<label class="mt-1">
					<input type="radio" name="SortValue" value="annual-maintenance-cost">
					By Maintenance Cost
				</label>

				<label class="mt-1">
					<input type="radio" name="SortValue" value="validity-period">
					By Validity Period
				</label>

			</div>
			<img src="~/images/main-page/filter-icon.svg" alt="Filter" id="filter-icon" />

			<!--Filters-->
			<div id="filter-list">
				<label class="header-label">
					<input type="checkbox" name="BankNameCheckbox" class="filter bool-filters search-by-bank" value="false" placeholder="Enter the bank name" gap-1 />
					Search by bank name
					<input type="text" class="search-by-bank-input" name="ChosenBankName" disabled/>
				</label>
				
				<label class="mt-1">
					<div class="header-label">Card with payment system</div>
					<div class="d-flex flex-direction-row gap-2">
						<label>
							<input type="checkbox" name="ChosenPaymentSystems" class="filter" value="@PaymentSystem.Visa" />
							Visa
						</label>
						<label>
							<input type="checkbox" name="ChosenPaymentSystems" class="filter" value="@PaymentSystem.Mastercard" />
							Mastercard
						</label>
					</div>
				</label>

				<label class="mt-1">
					<div class="header-label">Card with currency</div>
					<div class="d-flex flex-direction-row gap-2">
						<label>
							<input type="checkbox" name="ChosenCurrency" class="filter" value="@CardCurrency.UAH" />
							UAH
						</label>
						<label>
							<input type="checkbox" name="ChosenCurrency" class="filter" value="@CardCurrency.USD" />
							USD
						</label>
						<label>
							<input type="checkbox" name="ChosenCurrency" class="filter" value="@CardCurrency.EUR" />
							EUR
						</label>
					</div>
				</label>

				<label class="mt-1">
					<div class="header-label">Card Level</div>
					<div class="d-flex flex-direction-row gap-2">
						<label>
							<input type="checkbox" name="ChosenLevels" class="filter" value="@CardLevel.Normal" />
							Classic
						</label>
						<label>
							<input type="checkbox" name="ChosenLevels" class="filter" value="@CardLevel.Premium" />
							Premium
						</label>
					</div>
				</label>

				<label class="mt-1">
					<div class="header-label">Card Type</div>
					<div class="d-flex flex-direction-row gap-2">
						<label>
							<input type="checkbox" name="ChosenTypes" class="filter" value="@CardType.Credit" />
							Credit
						</label>
						<label>
							<input type="checkbox" name="ChosenTypes" class="filter" value="@CardType.Debit" />
							Debit
						</label>
					</div>
				</label>

				<button type="button" class="filter-submit-button" id="submit-filters">Use Filters</button>
			</div>

		</div>
	</form>
}

@section additionalScripts {
	<script type="module" src="~/js/GenetalListEvents.js" defer></script>
	<script type="module" src="~/js/entities/card-tariffs/CardList.js" defer></script>
}
