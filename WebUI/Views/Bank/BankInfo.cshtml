@model BankDto

<div class="main-content-block">
    <div id="item-info-container" class="mt-2 mb-5">
        <div id="item-header">
            <img src="/@Model.BankLogoPath" alt="bank-logo" />
            <h2>@Model.BankName</h2>
        </div>

        <table id="item-info-table">
            <tr><th>@Localizer["rating"]</th><td>@Model.Rating</td></tr>
            <tr><th>@Localizer["license"]</th>
                <td>
                    @if (Model.HasLicense)
                    {
                        <span>@Localizer["yes"]</span>
                    }
                    else{
                        <span>@Localizer["no"]</span>
                    }
                </td>
            </tr>
            <tr><th>@Localizer["founder"]</th><td>@Model.BankFounderFullName</td></tr>
            <tr><th>@Localizer["director"]</th><td>@Model.BankDirectorFullName</td></tr>
            <tr><th>@Localizer["capitalization"]</th><td>@Model.Capitalization</td></tr>
            <tr><th>@Localizer["clientsCount"]</th><td>@Model.ClientsCount</td></tr>
            <tr><th>@Localizer["activeClientsCount"]</th><td>@Model.ActiveClientsCount</td></tr>
            <tr><th>@Localizer["blockedClientsCount"]</th><td>@Model.BlockedClientsCount</td></tr>
            <tr><th>@Localizer["employeeCount"]</th><td>@Model.EmployeesCount</td></tr>
            <tr><th>@Localizer["contactPhone"]</th><td>@Model.ContactPhone</td></tr>
            <tr>
                <th>@Localizer["website"]</th>
                <td>
                    @if (Model.WebsiteUrl == null)
                    {
                        <span>@Localizer["noWebsite"]</span>
                    }
                    else
                    {
                        <a href="@Model.WebsiteUrl" target="_blank">@Model.WebsiteUrl</a>
                    }
                </td>
            </tr>
            <tr><th>@Localizer["establishedDate"]</th><td>@Model.EstablishedDate</td></tr>
            <tr><th>@Localizer["legalAddress"]</th><td>@Model.LegalAddress</td></tr>
        </table>

        <div id="item-info-action-buttons">
            <a asp-controller="Bank" asp-action="UpdateBank" asp-route-bankId="@Model.Id" asp-route-fromBankInfo="true" class="update">✏️ @Localizer["update"]</a>
            <a class="delete" data-element-name="@Model.BankName" data-element-id="@Model.Id">🗑️ @Localizer["delete"]</a>
            <a href="#">👥 @Localizer["users"]</a>
            <a href="#">🧑‍💼 @Localizer["employees"]</a>
            <a asp-controller="CardTariffs" asp-action="AddCard" asp-route-bankId="@Model.Id">➕ @Localizer["addCard"]</a>
        </div>

        <div id="bank-cards">
            @if (Model.Cards == null || Model.Cards.Count == 0)
            {
                <div class="text-center text-muted mt-3">
                    <i class="bi bi-credit-card fs-3"></i>
                    <p class="mt-2">@Localizer["noCards"] <strong>@Localizer["addCard"]</strong> @Localizer["createOne"]</p>
                </div>
            }
            else
            {
                <h4 class="ms-4">@Localizer["cards"]</h4>
                <div id="card-tariffs-icons">
                    @foreach (CardTariffsDto card in Model.Cards)
                    {
                        <div class="element-block bank-info border-none" style="@($"background-color:{card.CardColor}; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);")">
                            <a asp-controller="CardTariffs" asp-action="CardTariffsInfo" asp-route-cardId="@card.Id" class="text-reset text-decoration-none info-card-bank-info">
                                <div class="element-table" id="card-tariffs-element-bank-info">
                                    <div id="card-and-bank-names-bank-info">
                                        <h4>@card.CardName</h4>
                                    </div>
                                    <div class="right-card-side bank-info">
                                        <div id="payment-systems" class="bank-info">
                                            @if (card.EnabledPaymentSystems.Contains(PaymentSystem.Visa))
                                            {
                                                <div class="payment-system-block">
                                                    <img src="~/images/cards/visa.svg" alt="Visa" class="payment-system-image bank-info" />
                                                </div>
                                            }
                                            @if (card.EnabledPaymentSystems.Contains(PaymentSystem.Mastercard))
                                            {
                                                <div class="payment-system-block">
                                                    <img src="~/images/cards/mastercard.svg" alt="Mastercard" class="payment-system-image bank-info" />
                                                </div>
                                            }
                                        </div>
                                        <div class="card-details">
                                            @if (card.Type == CardType.Debit)
                                            {
                                                <h4>@Localizer["debit"]</h4>
                                            }
                                            @if (card.Type == CardType.Credit)
                                            {
                                                <h4>@Localizer["credit"]</h4>
                                            }
                                            @if (card.Level == CardLevel.Normal)
                                            {
                                                <h5>@Localizer["classic"]</h5>
                                            }
                                            @if (card.Level == CardLevel.Premium)
                                            {
                                                <h5>@Localizer["premium"]</h5>
                                            }
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    }
                </div>
            }
        </div>
    </div>
</div>


@section backButton {
    @if (ViewBag.ReturnUrl == "cardTariffs")
    {
        <a asp-controller="CardTariffs" asp-action="CardTariffsList" class="text-reset text-decoration-none back-link d-flex align-items-center">
            <img src="~/images/main-page/arrow-to-left-icon.svg" alt="Back" />
        </a>
    }
    else{
        <a asp-controller="Bank" asp-action="BanksList" class="text-reset text-decoration-none back-link d-flex align-items-center">
            <img src="~/images/main-page/arrow-to-left-icon.svg" alt="Back" />
        </a>
    }

}

@section additionalScripts {
    <script type="module" src="~/js/entities/bank/BankMenu.js" defer></script>
    <script type="module" src="~/js/entities/bank/BankDeleteIcon.js" ></script>
    <script type="module" src="~/js/entities/card-tariffs/ColorHandler.js" defer></script>
}

